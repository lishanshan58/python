<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- saved from url=(0088)http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/ -->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US"><head profile="http://gmpg.org/xfn/11"><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title> How to Make a US County Thematic Map Using Free Tools</title>
<meta name="generator" content="WordPress 3.9.1">  
<link rel="stylesheet" href="./How to Make a US County Thematic Map Using Free Tools_files/style.css" type="text/css" media="screen">
<link rel="alternate" type="application/rss+xml" title="RSS 2.0" href="http://flowingdata.com/feed">
<link rel="pingback" href="http://flowingdata.com/xmlrpc.php">
<link rel="shortcut icon" href="http://flowingdata.com/wp-content/themes/flowingdata-4-9/images/favicon.ico">
<script async="" type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/gpt.js"></script><script type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/jquery-1.4.4.min.js"></script>
<script type="text/javascript">
    var googletag = googletag || {};
    googletag.cmd = googletag.cmd || [];
    (function() {
    var gads = document.createElement('script');
    gads.async = true;
    gads.type = 'text/javascript';
    var useSSL = 'https:' == document.location.protocol;
    gads.src = (useSSL ? 'https:' : 'http:') + 
    '//www.googletagservices.com/tag/js/gpt.js';
    var node = document.getElementsByTagName('script')[0];
    node.parentNode.insertBefore(gads, node);
    })();
    </script>
<script type="text/javascript">
    googletag.cmd.push(function() {
    googletag.defineSlot('/2462688/Sidebar_rectangle', [300, 250], 'div-gpt-ad-1332011316310-2').addService(googletag.pubads());
googletag.defineSlot('/2462688/Bottom_Post', [300, 250], 'div-gpt-ad-1332011316310-0').addService(googletag.pubads());    googletag.pubads().enableSingleRequest();
    googletag.pubads().collapseEmptyDivs();
    googletag.enableServices();
    });
    </script>
<link rel="alternate" type="application/rss+xml" title="FlowingData » How to Make a US County Thematic Map Using Free Tools Comments Feed" href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/feed/">
<link rel="stylesheet" id="yarppWidgetCss-css" href="./How to Make a US County Thematic Map Using Free Tools_files/widget.css" type="text/css" media="all">
<link rel="stylesheet" id="wpt-twitter-feed-css" href="./How to Make a US County Thematic Map Using Free Tools_files/twitter-feed.css" type="text/css" media="all">
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://flowingdata.com/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://flowingdata.com/wp-includes/wlwmanifest.xml">
<link rel="prev" title="Join the Great American Hackathon" href="http://flowingdata.com/2009/11/11/join-the-great-american-hackathon/">
<link rel="next" title="Land Mass and Population by Country" href="http://flowingdata.com/2009/11/13/land-mass-and-population-by-country/">
<meta name="generator" content="WordPress 3.9.1">
<link rel="canonical" href="./How to Make a US County Thematic Map Using Free Tools_files/How to Make a US County Thematic Map Using Free Tools.html">
<link rel="shortlink" href="http://flowingdata.com/?p=3581">
<link rel="stylesheet" href="./How to Make a US County Thematic Map Using Free Tools_files/wp-page-numbers.css" type="text/css" media="screen"><style type="text/css">img#wpstats{display:none}</style><link rel="stylesheet" type="text/css" href="./How to Make a US County Thematic Map Using Free Tools_files/shCore.css"><link rel="stylesheet" type="text/css" href="./How to Make a US County Thematic Map Using Free Tools_files/shThemeDefault.css"><style type="text/css" id="syntaxhighlighteranchor"></style>
<link rel="stylesheet" id="custom-css-css" type="text/css" href="./How to Make a US County Thematic Map Using Free Tools_files/saved_resource">
<script async="" type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/pubads_impl_40.js"></script></head>
<body>
<a name="top"></a>
<div id="topnav">
<div id="topnav-content" class="content">
<div id="login" class="float-right">
<a href="http://flowingdata.com/wp-login.php">Log in</a>
&nbsp;or&nbsp; <a href="http://flowingdata.com/membership/">Become a Member</a>
</div>
</div>
<div class="clear-line"></div>
</div> 
<div id="header">
<div id="header-content" class="content">
<div id="nav">
<a href="http://flowingdata.com/">
<img src="./How to Make a US County Thematic Map Using Free Tools_files/logo.png" class="float-left">
</a>
<div id="pages" class="float-right">
<ul>
<li><a href="http://flowingdata.com/membership/">Membership</a></li>
<li><a href="http://flowingdata.com/learning/">Learning</a></li>
<li><a href="https://jobs.flowingdata.com/">Job Board</a></li>
<li><a href="http://flowingdata.com/category/projects/">Projects</a></li>
<li><a href="http://flowingdata.com/about/">About</a></li>
</ul>
</div> 
<div class="clear-line"></div>
</div> 
</div> 
</div> 
<div class="clear-line"></div>
<div id="main-wrapper">
<div id="content-wrapper" class="content">
<div class="post" id="post-3581">
<div id="content" class="single-long">
<div class="entry">
<div class="category">
<a href="http://flowingdata.com/category/tutorials/" title="View all posts in Tutorials" rel="category tag">Tutorials</a> &nbsp;/&nbsp; <a href="http://flowingdata.com/tag/choropleth/" rel="tag">choropleth</a>, <a href="http://flowingdata.com/tag/python/" rel="tag">Python</a>, <a href="http://flowingdata.com/tag/svg/" rel="tag">SVG</a> </div>
<h1>How to Make a US County Thematic Map Using Free Tools</h1>
<div class="clear-line"></div>
<div class="author">
By <strong>Nathan Yau</strong>
</div> 
<div id="lead-in">
<p class="img-right"><img width="425" height="278" src="./How to Make a US County Thematic Map Using Free Tools_files/Unemployment-choropleth-425x278.png" class="attachment-long-form-thumb wp-post-image" alt="Unemployment choropleth"></p>
<div class="entry-excerpt">
There are about a million ways to make a choropleth map. The problem is that a lot of solutions require expensive software or have a high learning curve. It doesn't have to be that way. </div>
<div id="tut-meta">
<div class="button-link"><a href="http://projects.flowingdata.com/america/unemployment/">Demo</a></div>
<div class="button-link"><a href="http://projects.flowingdata.com/tut/200911-choropleth-tutorial.zip">Download Source</a></div>
<div class="clear-line"></div>
</div> 
<div class="clear-line"></div>
</div> 
<div class="entry-content">
<p>What if you just want a simple map without all the GIS stuff? In this post, I'll show you how to make a county-specific choropleth map using only free tools.</p>
<p>Here's <a href="http://projects.flowingdata.com/america/unemployment/">what we're after</a>. It's an <a href="http://flowingdata.com/2009/11/04/unemployment-2004-to-present-the-country-is-bleeding/">unemployment map</a> from 2009.<br>
<span id="more-3581"></span></p>
<h3>Step 0. System requirements</h3>
<p><span class="tip">This tutorial was written with Python 2.5 and Beautiful Soup 3. If you're using a more recent version of either, you might have to modify the code. See comments below for tips.</span>Just as a heads up, you'll need <a href="http://www.python.org/">Python</a> installed on your computer. Python comes pre-installed on the Mac. I'm not sure about Windows. If you're on Linux, well, I'm sure you're a big enough nerd to already be fluent in Python.</p>
<p>We're going to make good use of the Python library <a href="http://www.crummy.com/software/BeautifulSoup/">Beautiful Soup</a>, so you'll need that too. It's a super easy, super useful HTML/XML parser that you should come to know and love.</p>
<h3>Step 1. Prepare county-specific data</h3>
<p>The first step of every visualization is to get the data. You can't do anything without it. In this example we're going to use county-level unemployment data from the Bureau of Labor Statistics. However, you have to go through FTP to get the most recent numbers, so to save some time, <a href="http://datasets.flowingdata.com/unemployment09.csv">download the comma-separated (CSV) file here</a>. </p>
<p>It was originally an Excel file. All I did was remove the headers and save as a CSV.</p>
<h3>Step 2. Get the blank map</h3>
<p>Luckily, we don't have to start from scratch. We can get a blank <a href="http://commons.wikimedia.org/wiki/File:USA_Counties_with_FIPS_and_names.svg">USA counties map</a> from Wikimedia Commons. The page links to the map in four sizes in PNG format and then one as SVG (<code>USA_Counties_with_FIPS_and_names.svgâ€Ž</code>). We want the SVG one. Download the SVG file onto your computer and save it as <code>counties.svg</code>.</p>
<p><span class="tip">Blank US counties map in SVG format</span><a href="http://commons.wikimedia.org/wiki/File:USA_Counties_with_FIPS_and_names.svg"><img src="./How to Make a US County Thematic Map Using Free Tools_files/usa-counties-545x345.png" alt="usa-counties" title="usa-counties" width="545" height="345" class="alignnone size-medium wp-image-3591"></a></p>
<p>The important thing here, if you're not familiar with SVG (which stands for scalable vector graphics), is that it's actually an XML file. It's text with tags, and you can edit it in a text editor like you would a HTML file. The browser or image viewer reads the XML. The XML tells the browser what to show.</p>
<p>Anyways, we've downloaded our SVG map. Let's move on to the next step.</p>
<h3>Step 3. Open the SVG file in a text editor</h3>
<p>I want to make sure we're clear on what we're editing. Like I said in Step 2, our SVG map is simply an XML file. We're not doing any photoshop or image-editing. We're editing an XML file. Open up the SVG file in a text editor so that we can see what we're dealing with.</p>
<p>You should see <a href="http://flowingdata.com/?attachment_id=3611">something like this</a>:</p>
<p><span class="tip">SVG is just XML that you can change in a text editor.</span><img src="./How to Make a US County Thematic Map Using Free Tools_files/svg-shot-top-545x404.png" alt="svg-shot-top" title="svg-shot-top" width="545" height="404" class="alignnone size-medium wp-image-3611"></p>
<p>We don't care so much about the beginning of the SVG file, other than the <code>width</code> and <code>height</code> variables, but we'll get back to that later.</p>
<p>Scroll down some more, and we'll get into the <a href="http://flowingdata.com/?attachment_id=3610">meat of the map</a>:</p>
<p><span class="tip">The <code>path</code> tags contain the geographies of each county.</span><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/svg-shot-middle/" rel="attachment wp-att-3610"><img src="./How to Make a US County Thematic Map Using Free Tools_files/svg-shot-middle-545x404.png" alt="svg-shot-middle" title="svg-shot-middle" width="545" height="404" class="alignnone size-medium wp-image-3610"></a></p>
<p>Each <code>path</code> is a county. The long run of numbers are the coordinates for the county's boundary lines. We're not going to fuss with those numbers. </p>
<p>We only care about the beginning and very end of the <code>path</code> tag. We're going to change the <code>style</code> attribute, namely <code>fill</code> color. We want the darkness of <code>fill</code> to correspond to the unemployment rate in each given county. </p>
<p>We could change each one manually, but there are over 3,000 counties. That would take too long. Instead we'll use Beautiful Soup, an XML parsing Python library, to change colors accordingly.</p>
<p>Each <code>path</code> also has an <code>id</code>, which is actually something called a <a href="http://en.wikipedia.org/wiki/FIPS_county_code">FIPS code</a>. FIPS stands for Federal Information Processing Standard. Every county has a unique FIPS code, and it's how we are going to associate each path with our unemployment data.</p>
<h3>Step 4. Create Python script</h3>
<p>Open a blank file in the same directory as the SVG map and unemployment data. Save it as <strong>color_map.py</strong>.</p>
<h3>Step 5. Import necessary modules</h3>
<p>Our script is going to do a few things. The first is read in our CSV file of unemployment data. So we'll import the <code>csv</code> module in Python. We're also going to use Beautiful Soup later, so let's import that too.</p>
<div id="highlighter_845041" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_845041_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_845041" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="keyword">import</code> <code class="plain">csv</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="keyword">from</code> <code class="plain">BeautifulSoup </code><code class="keyword">import</code> <code class="plain">BeautifulSoup</code></td></tr></tbody></table></div></div></div>
<p></p>
<h3>Step 6. Read in unemployment data with Python</h3>
<p>Now let's read in the data.</p>
<div id="highlighter_354132" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_354132_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_354132" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Read in unemployment rates</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">unemployment </code><code class="keyword">=</code> <code class="plain">{}</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">reader </code><code class="keyword">=</code> <code class="plain">csv.reader(</code><code class="functions">open</code><code class="plain">(</code><code class="string">'unemployment09.csv'</code><code class="plain">), delimiter</code><code class="keyword">=</code><code class="string">","</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="keyword">for</code> <code class="plain">row </code><code class="keyword">in</code> <code class="plain">reader:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">full_fips </code><code class="keyword">=</code> <code class="plain">row[</code><code class="value">1</code><code class="plain">] </code><code class="keyword">+</code> <code class="plain">row[</code><code class="value">2</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">rate </code><code class="keyword">=</code> <code class="functions">float</code><code class="plain">( row[</code><code class="value">8</code><code class="plain">].strip() )</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">unemployment[full_fips] </code><code class="keyword">=</code> <code class="plain">rate</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">except</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">pass</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>We read in the data with <code>csv.reader()</code> and then iterate through each row in the CSV file. The FIPS code is split up in the CSV by state code (second column) and then county code (third column). We put the two together for the full FIPS county code, making a five digit number.</p>
<p>Rate is the ninth column. We convert it to a <code>float</code> since it's initially a string when we read it from the CSV.</p>
<p>The <code>rate</code> is then stored in the <code>unemployment</code> dictionary with the <code>full_fips</code> as key.</p>
<p>Cool. The data is in. Now let's load the SVG map, which remember, is an XML file.</p>
<h3>Step 7. Load county map</h3>
<p>Loading the map is straightforward. It's just one line of code.</p>
<div id="highlighter_179585" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_179585_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_179585" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Load the SVG map</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">svg </code><code class="keyword">=</code> <code class="functions">open</code><code class="plain">(</code><code class="string">'counties.svg'</code><code class="plain">, </code><code class="string">'r'</code><code class="plain">).read()</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>The entire string is stored in <code>svg</code>.</p>
<h3>Step 8. Parse it with Beautiful Soup</h3>
<p>Loading <code>svg</code> into Beautiful Soup is also straightforward.</p>
<div id="highlighter_576663" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_576663_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_576663" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Load into Beautiful Soup</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">soup </code><code class="keyword">=</code> <code class="plain">BeautifulSoup(svg, selfClosingTags</code><code class="keyword">=</code><code class="plain">[</code><code class="string">'defs'</code><code class="plain">,</code><code class="string">'sodipodi:namedview'</code><code class="plain">])</code></td></tr></tbody></table></div></div></div>
<p></p>
<h3>Step 9. Find all the counties in the SVG</h3>
<p>Beautiful Soup has a nifty <code>findAll()</code> function that we can use to find all the counties in our SVG file.</p>
<div id="highlighter_361106" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_361106_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_361106" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Find counties</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">paths </code><code class="keyword">=</code> <code class="plain">soup.findAll(</code><code class="string">'path'</code><code class="plain">)</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>All paths are stored in the <code>paths</code> array.</p>
<h3>Step 10. Decide what colors to use for map</h3>
<p>There are plenty of color schemes to choose from, but if you don't want to think about it, give the <a href="http://colorbrewer2.org/">ColorBrewer</a> a whirl. It's a tool to help you decide your colors. For this particular map, I chose the PurpleRed scheme with six data classes.</p>
<p><span class="tip">ColorBrewer interface for easy, straightforward way to pick colors</span><img src="./How to Make a US County Thematic Map Using Free Tools_files/colorbrewer-545x342.png" alt="colorbrewer" title="colorbrewer" width="545" height="342" class="alignnone size-medium wp-image-3645"></p>
<p>In the bottom, left-hand corner, are our color codes. Select the hexadecimal option (HEX), and then create an array of those hexadecimal colors.</p>
<div id="highlighter_527254" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_527254_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_527254" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Map colors</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">colors </code><code class="keyword">=</code> <code class="plain">[</code><code class="string">"#F1EEF6"</code><code class="plain">, </code><code class="string">"#D4B9DA"</code><code class="plain">, </code><code class="string">"#C994C7"</code><code class="plain">, </code><code class="string">"#DF65B0"</code><code class="plain">, </code><code class="string">"#DD1C77"</code><code class="plain">, </code><code class="string">"#980043"</code><code class="plain">]</code></td></tr></tbody></table></div></div></div>
<p></p>
<h3>Step 11. Prepare style for paths</h3>
<p>We're getting close to the climax. Like I said earlier, we're going to change the <code>style</code> attribute for each path in the SVG. We're just interested in fill color, but to make things easier we're going to replace the entire <code>style</code> instead of parsing to replace only the color. </p>
<div id="highlighter_580091" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_580091_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_580091" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># County style</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">'font</code><code class="keyword">-</code><code class="plain">size:</code><code class="value">12px</code><code class="plain">;fill</code><code class="keyword">-</code><code class="plain">rule:nonzero;stroke:</code><code class="comments">#FFFFFF;stroke-opacity:1;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">stroke</code><code class="keyword">-</code><code class="plain">width:</code><code class="value">0.1</code><code class="plain">;stroke</code><code class="keyword">-</code><code class="plain">miterlimit:</code><code class="value">4</code><code class="plain">;stroke</code><code class="keyword">-</code><code class="plain">dasharray:none;stroke</code><code class="keyword">-</code><code class="plain">linecap:butt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">marker</code><code class="keyword">-</code><code class="plain">start:none;stroke</code><code class="keyword">-</code><code class="plain">linejoin:bevel;fill:'</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Everything is the same as the previous style except we moved <code>fill</code> to the end and left the value blank. We're going to fill that in just a second. We also changed <code>stroke</code> to <code>#FFFFFF</code> to make county borders white. We didn't have to leave that value blank, because we want all borders to be white while <code>fill</code> depends on unemployment rate.</p>
<h3>Step 12. Change color of counties</h3>
<p>We're ready to change colors now! Loop through all the paths, find the unemployment rate from the <code>unemployment</code> dictionary, and then select color class accordingly. Here's the code:</p>
<div id="highlighter_914581" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_914581_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_914581" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Color the counties based on unemployment rate</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="keyword">for</code> <code class="plain">p </code><code class="keyword">in</code> <code class="plain">paths:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">p[</code><code class="string">'id'</code><code class="plain">] </code><code class="keyword">not</code> <code class="keyword">in</code> <code class="plain">[</code><code class="string">"State_Lines"</code><code class="plain">, </code><code class="string">"separator"</code><code class="plain">]:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="comments"># pass</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">rate </code><code class="keyword">=</code> <code class="plain">unemployment[p[</code><code class="string">'id'</code><code class="plain">]]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">except</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">continue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">rate &gt; </code><code class="value">10</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">5</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">8</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">4</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">6</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">3</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">4</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">2</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">2</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">1</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color </code><code class="keyword">=</code> <code class="plain">colors[color_class]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">p[</code><code class="string">'style'</code><code class="plain">] </code><code class="keyword">=</code> <code class="plain">path_style </code><code class="keyword">+</code> <code class="plain">color</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Notice the <code>if</code> statement. I don't want to change the style of state lines or the line that separates Hawaii and Alaska from the rest of the states.</p>
<p>I also hard-coded the conditions to decide the color class because I knew beforehand what the distribution is like. If however, you didn't know the distribution, you could use something like this: <code>float(len(colors)-1) * float(rate - min_value) / float(max_value - min_value)</code>.</p>
<h3>Step 13. Output modified map</h3>
<p>Almost done. We just need to output the newly colored SVG map.</p>
<div id="highlighter_305806" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_305806_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_305806" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Output map</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="functions">print</code> <code class="plain">soup.prettify()</code></td></tr></tbody></table></div></div></div>
<p></p>
<p>Save your Python script. For the sake of completeness, here's what your Python script should now look like:</p>
<div id="highlighter_163843" class="syntaxhighlighter nogutter  "><div class="bar"><div class="toolbar"><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#viewSource" title="view source" class="item viewSource" style="width: 16px; height: 16px;">view source</a><div class="item copyToClipboard"><embed width="16" height="16" id="highlighter_163843_clipboard" type="application/x-shockwave-flash" title="copy to clipboard" allowscriptaccess="always" wmode="transparent" flashvars="highlighterId=highlighter_163843" menu="false" src="http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf"></div><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#printSource" title="print" class="item printSource" style="width: 16px; height: 16px;">print</a><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#about" title="?" class="item about" style="width: 16px; height: 16px;">?</a></div></div><div class="lines"><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments">### color_map.py</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="keyword">import</code> <code class="plain">csv</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="keyword">from</code> <code class="plain">BeautifulSoup </code><code class="keyword">import</code> <code class="plain">BeautifulSoup</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="comments"># Read in unemployment rates</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">unemployment </code><code class="keyword">=</code> <code class="plain">{}</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">min_value </code><code class="keyword">=</code> <code class="value">100</code><code class="plain">; max_value </code><code class="keyword">=</code> <code class="value">0</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">reader </code><code class="keyword">=</code> <code class="plain">csv.reader(</code><code class="functions">open</code><code class="plain">(</code><code class="string">'unemployment09.csv'</code><code class="plain">), delimiter</code><code class="keyword">=</code><code class="string">","</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="keyword">for</code> <code class="plain">row </code><code class="keyword">in</code> <code class="plain">reader:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">full_fips </code><code class="keyword">=</code> <code class="plain">row[</code><code class="value">1</code><code class="plain">] </code><code class="keyword">+</code> <code class="plain">row[</code><code class="value">2</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">rate </code><code class="keyword">=</code> <code class="functions">float</code><code class="plain">( row[</code><code class="value">8</code><code class="plain">].strip() )</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">unemployment[full_fips] </code><code class="keyword">=</code> <code class="plain">rate</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">except</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">pass</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Load the SVG map</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">svg </code><code class="keyword">=</code> <code class="functions">open</code><code class="plain">(</code><code class="string">'counties.svg'</code><code class="plain">, </code><code class="string">'r'</code><code class="plain">).read()</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="comments"># Load into Beautiful Soup</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">soup </code><code class="keyword">=</code> <code class="plain">BeautifulSoup(svg, selfClosingTags</code><code class="keyword">=</code><code class="plain">[</code><code class="string">'defs'</code><code class="plain">,</code><code class="string">'sodipodi:namedview'</code><code class="plain">])</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># Find counties</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">paths </code><code class="keyword">=</code> <code class="plain">soup.findAll(</code><code class="string">'path'</code><code class="plain">)</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="comments"># Map colors</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">colors </code><code class="keyword">=</code> <code class="plain">[</code><code class="string">"#F1EEF6"</code><code class="plain">, </code><code class="string">"#D4B9DA"</code><code class="plain">, </code><code class="string">"#C994C7"</code><code class="plain">, </code><code class="string">"#DF65B0"</code><code class="plain">, </code><code class="string">"#DD1C77"</code><code class="plain">, </code><code class="string">"#980043"</code><code class="plain">]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="comments"># County style</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">path_style </code><code class="keyword">=</code> <code class="plain">'font</code><code class="keyword">-</code><code class="plain">size:</code><code class="value">12px</code><code class="plain">;fill</code><code class="keyword">-</code><code class="plain">rule:nonzero;stroke:</code><code class="comments">#FFFFFF;stroke-opacity:1;</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="plain">stroke</code><code class="keyword">-</code><code class="plain">width:</code><code class="value">0.1</code><code class="plain">;stroke</code><code class="keyword">-</code><code class="plain">miterlimit:</code><code class="value">4</code><code class="plain">;stroke</code><code class="keyword">-</code><code class="plain">dasharray:none;stroke</code><code class="keyword">-</code><code class="plain">linecap:butt;</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="plain">marker</code><code class="keyword">-</code><code class="plain">start:none;stroke</code><code class="keyword">-</code><code class="plain">linejoin:bevel;fill:'</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="comments"># Color the counties based on unemployment rate</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="keyword">for</code> <code class="plain">p </code><code class="keyword">in</code> <code class="plain">paths:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">p[</code><code class="string">'id'</code><code class="plain">] </code><code class="keyword">not</code> <code class="keyword">in</code> <code class="plain">[</code><code class="string">"State_Lines"</code><code class="plain">, </code><code class="string">"separator"</code><code class="plain">]:</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">try</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">rate </code><code class="keyword">=</code> <code class="plain">unemployment[p[</code><code class="string">'id'</code><code class="plain">]]</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">except</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">continue</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">if</code> <code class="plain">rate &gt; </code><code class="value">10</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">5</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">8</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">4</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">6</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">3</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">4</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">2</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">elif</code> <code class="plain">rate &gt; </code><code class="value">2</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">1</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="keyword">else</code><code class="plain">:</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color_class </code><code class="keyword">=</code> <code class="value">0</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">color </code><code class="keyword">=</code> <code class="plain">colors[color_class]</code></td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="plain">p[</code><code class="string">'style'</code><code class="plain">] </code><code class="keyword">=</code> <code class="plain">path_style </code><code class="keyword">+</code> <code class="plain">color</code></td></tr></tbody></table></div><div class="line alt2"><table><tbody><tr><td class="content">&nbsp;</td></tr></tbody></table></div><div class="line alt1"><table><tbody><tr><td class="content"><code class="functions">print</code> <code class="plain">soup.prettify()</code></td></tr></tbody></table></div></div></div>
<p></p>
<h3>Step 14. Run script and save new map</h3>
<p>Now all we have to do is run our script and save the output.</p>
<p><span class="tip">Running script in OS X Terminal</span><a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/terminal-out/" rel="attachment wp-att-3662"><img src="./How to Make a US County Thematic Map Using Free Tools_files/terminal-out-545x436.png" alt="terminal-out" title="terminal-out" width="545" height="436" class="alignnone size-medium wp-image-3662"></a></p>
<p>We're done! Open your SVG in FIrefox or Safari, and you should see a nicely colored map similar to the one below. </p>
<p><img src="./How to Make a US County Thematic Map Using Free Tools_files/choropleth061-625x396.png" alt="choropleth06" width="625" height="396" class="alignnone size-medium wp-image-33332"></p>
<p>Oh wait, there's one teeny little thing. The state borders are still dark grey. We can make those white by editing the the SVG file manually.</p>
<p>We open our new SVG in a text editor, and change the stroke to <code>#FFFFFF</code> from <code>#221e1f</code> around line 15780. Do something similar on line 15785 for the separator. Okay. Now we're done.</p>
<h3>Where to Go From Here</h3>
<p>While this tutorial was focused on unemployment data, I tried to keep it general enough so that you could apply it to other datasets. All you need are data with FIPS codes, and it should be fairly straightforward to hack the above script.</p>
<p>You can also load the SVG into Adobe Illustrator or your favorite open source vector art software and edit the map from there, which is what I did for the <a href="http://projects.flowingdata.com/america/unemployment/">final graphic</a>. </p>
<p>So go ahead. Give it a try. Have fun.</p>
<p>For more examples, guidance, and all-around data goodness like this, <a href="http://flowingdata.com/book/">order Visualize This</a>, the FlowingData book on visualization, design, and statistics.</p>
<div class="clear-line"></div>
</div> 
</div> 
<div class="clear-line"></div>
<div id="end"></div>
<div class="" style="padding:20px 0 30px 0;border-top:1px solid #e2e2e2;border-bottom:1px solid #e2e2e2;text-align:center">
<p style="font-size:1.2em;margin:0 auto 25px auto;line-height:1.5em;">Become a FlowingData member, and get instant access to tutorials and resources.</p>
<div><a href="http://flowingdata.com/membership/" class="subscribe-button">Join Now</a></div>
</div>
<div id="unsubscribed">
<div class="float-left" style="width:405px;padding-top:10px">
<h3>Membership</h3>
<p>This is for people who want to learn to make and design data graphics. Your support goes directly to FlowingData, an independently run site. <a href="http://flowingdata.com/membership/">Join now for instant access</a>.</p>
</div>
<div class="float-left" style="width:400px;margin-left:20px;padding-left:20px;border-left:1px solid #e2e2e2;padding-top:10px">
<h3>What you get</h3>
<ul>
<li>Instant access to tutorials on how to make and design data graphics</li>
<li>Source code and files to use with your own data</li>
<li>Hand-picked links and resources from around the web</li>
</ul>
</div>
<div class="clear-line"></div>
</div>
<span id="comments"></span>
<div style="width:625px">
<div id="comments-block">
<h2>111 Comments</h2>
<ul class="commentlist">
<li class="comment even thread-even depth-1" id="li-comment-35480">
<div id="comment-35480" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/ad4cee95a820d7ea145a8984d2013c47" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://doriantaylor.com/" rel="external nofollow" class="url">Dorian Taylor</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35480">November 12, 2009 at 3:44 am</a>
</span>
</div>
<div class="comment-text"><p>This is a superb demonstration that there exist ample raw materials lying around for us to use, and that data don’t care how they’re rendered. If your objective is to illustrate a point, results can be minutes away.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35482">
<div id="comment-35482" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/9e15d450570f19449ca6ca417caf65eb" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.bubblefoundry.com/" rel="external nofollow" class="url">Peter Robinett</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35482">November 12, 2009 at 4:02 am</a>
</span>
</div>
<div class="comment-text"><p>If you’re doing work on the web you would be well served by considering the new cartographer.js library: <a href="http://cartographer.visualmotive.com/" rel="nofollow">http://cartographer.visualmotive.com/</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35505">
<div id="comment-35505" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35505">November 12, 2009 at 11:05 am</a>
</span>
</div>
<div class="comment-text"><p>yeah, i posted about that last week:</p>
<p><a href="http://flowingdata.com/2009/11/05/make-thematic-maps-with-cartographer-js/" rel="nofollow">http://flowingdata.com/2009/11/05/make-thematic-maps-with-cartographer-js/</a></p>
<p>it only works at the state level right now though.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35533">
<div id="comment-35533" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/9e15d450570f19449ca6ca417caf65eb" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.bubblefoundry.com/" rel="external nofollow" class="url">Peter Robinett</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35533">November 12, 2009 at 7:02 pm</a>
</span>
</div>
<div class="comment-text"><p>Doh, of course, that’s where I learned about Chris’ latest project!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35485">
<div id="comment-35485" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/a2b51961d5cb9140c6b949d2c9bfe0a7" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://thejit.org/" rel="external nofollow" class="url">Nicolas</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35485">November 12, 2009 at 5:35 am</a>
</span>
</div>
<div class="comment-text"><p>Nice approach, thanks for sharing :)</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35486">
<div id="comment-35486" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/9bb03f0a91eab52fe022450c323810f2" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://jeromecukier.net/" rel="external nofollow" class="url">jerome cukier</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35486">November 12, 2009 at 5:48 am</a>
</span>
</div>
<div class="comment-text"><p>Thanks Nathan for the step-by-step instructions<br>
for those interested in world map choropleths (thes?), the kind folks at Nagoya University also propose a python script: <a href="http://bit.ly/29csKc" rel="nofollow">http://bit.ly/29csKc</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35488">
<div id="comment-35488">
<p>Pingback:
<cite class="fn"><a href="http://weirdcorrelations.wordpress.com/2009/11/12/progress-report-google-maps-and-dutch-elections/" rel="external nofollow" class="url">Progress report: Google Maps and Dutch elections « Weird Correlations</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-odd thread-alt depth-1" id="li-comment-35490">
<div id="comment-35490">
<p>Pingback:
<cite class="fn"><a href="http://identi.ca/notice/14460981" rel="external nofollow" class="url">marc (murdelta) 's status on Thursday, 12-Nov-09 12:22:31 UTC - Identi.ca</a></cite> </p>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35491">
<div id="comment-35491" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2490372418113b2b2b797853bf1115d5" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Matt</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35491">November 12, 2009 at 8:59 am</a>
</span>
</div>
<div class="comment-text"><p>Would you post the original site where you got the unemployment data excel file please?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35493">
<div id="comment-35493" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/8917aec679a2fcea71767c89917e5576" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.chryswu.com/blog" rel="external nofollow" class="url">Chrys Wu</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35493">November 12, 2009 at 9:30 am</a>
</span>
</div>
<div class="comment-text"><p>@Matt: The Bureau of Labor Statistics provides <a href="http://www.bls.gov/Lau/#data" rel="nofollow">state-by-state unemployment data</a> as well as <a href="http://www.bls.gov/cps/#data" rel="nofollow">comprehensive data</a> on the nation’s workforce.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35525">
<div id="comment-35525" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2490372418113b2b2b797853bf1115d5" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Matt</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35525">November 12, 2009 at 3:27 pm</a>
</span>
</div>
<div class="comment-text"><p>Got it. For the viewers at home, here’s the hosted table for 2008…</p>
<p><a href="ftp://ftp.bls.gov/pub/special.requests/la/laucnty08.txt" rel="nofollow">ftp://ftp.bls.gov/pub/special.requests/la/laucnty08.txt</a></p>
<p>or see the page linking to it here…</p>
<p><a href="http://www.bls.gov/lau/" rel="nofollow">http://www.bls.gov/lau/</a></p>
<p>and scroll down to the heading “COUNTY DATA”. Looks like they have tables going back to 1990. Anyone want to make an animated version of this map showing the changes from 1990 to present?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35526">
<div id="comment-35526" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2490372418113b2b2b797853bf1115d5" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Matt</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35526">November 12, 2009 at 3:43 pm</a>
</span>
</div>
<div class="comment-text"><p>Actually, I don’t see any county unemployment statistics for 2009, anyone see where that info is located?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even depth-3" id="li-comment-35550">
<div id="comment-35550" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35550">November 12, 2009 at 11:56 pm</a>
</span>
</div>
<div class="comment-text"><p>Matt, here are the instructions I got from BLS (I had to email them) on how to get up-to-date county data via FTP:</p>
<p><a href="http://docs.google.com/View?id=dhk56npq_89cm48gqgz" rel="nofollow">http://docs.google.com/View?id=dhk56npq_89cm48gqgz</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35494">
<div id="comment-35494" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/843ac67b7296eee5fb9ad66d84430289" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Scott</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35494">November 12, 2009 at 9:45 am</a>
</span>
</div>
<div class="comment-text"><p>Very nice article, but I think the counties map you want to link to is USA_Counties_with_FIPS_and_names.svg. USA_Counties_with_names.svg does not contain the FIPS data.</p>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/5/5f/USA_Counties_with_FIPS_and_names.svg" rel="nofollow">http://upload.wikimedia.org/wikipedia/commons/5/5f/USA_Counties_with_FIPS_and_names.svg</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35507">
<div id="comment-35507" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35507">November 12, 2009 at 11:10 am</a>
</span>
</div>
<div class="comment-text"><p>thanks, scott for pointing that out. fixed.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="trackback odd alt thread-odd thread-alt depth-1" id="li-comment-35495">
<div id="comment-35495">
<p>Pingback:
<cite class="fn"><a href="http://popurls.com/pop" rel="external nofollow" class="url">=== popurls.com === popular today</a></cite> </p>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35496">
<div id="comment-35496" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/dda7f7dd8840db62a6e04ccca14afbee" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Joan</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35496">November 12, 2009 at 10:25 am</a>
</span>
</div>
<div class="comment-text"><p>What type of classification does ColorBrewer use? It could drastically change the appearance of the map depending on the distribution of the data</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35500">
<div id="comment-35500" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/107b263d9f524b5d3990edb7cac5c940" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.cartogrammar.com/blog" rel="external nofollow" class="url">Andy Woodruff</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35500">November 12, 2009 at 10:48 am</a>
</span>
</div>
<div class="comment-text"><p>ColorBrewer doesn’t deal with the classification; he’s classified the data in the code in step 12, in this case dividing it by equal intervals.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35504">
<div id="comment-35504" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/dda7f7dd8840db62a6e04ccca14afbee" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Joan</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35504">November 12, 2009 at 11:05 am</a>
</span>
</div>
<div class="comment-text"><p>I see now, thanks! Probably would have behooved me to actually look at the code.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35497">
<div id="comment-35497" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/aa7c1350d93036592f58f165318044db" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://billmill.org/" rel="external nofollow" class="url">Bill Mill</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35497">November 12, 2009 at 10:41 am</a>
</span>
</div>
<div class="comment-text"><p>It’s not really accurate to call BeautifulSoup “the XML parsing Python library”, it’s only one of many python libraries that can parse XML.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35508">
<div id="comment-35508" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35508">November 12, 2009 at 11:12 am</a>
</span>
</div>
<div class="comment-text"><p>right. i just meant that it’s, well, an XML parsing python library.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35498">
<div id="comment-35498" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/1b410f6e6d037749192a51c17d2aacc7" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Bruce</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35498">November 12, 2009 at 10:44 am</a>
</span>
</div>
<div class="comment-text"><p>Really cool; thanks!</p>
<p>Would be nice to see the final result allow interactive comparison of different years; e.g. use a single map. How would one do that? Use some JS to switch the color values depending on year?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35499">
<div id="comment-35499" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/7ba164f40a50bc23dbb2aa825fb7bc16" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://had.co.nz/" rel="external nofollow" class="url">Hadley</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35499">November 12, 2009 at 10:48 am</a>
</span>
</div>
<div class="comment-text"><p>How about some R code?! It would be much more succinct.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35509">
<div id="comment-35509" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35509">November 12, 2009 at 11:14 am</a>
</span>
</div>
<div class="comment-text"><p>I tried, and then I got fed up with undocumented details that I should know about. Care to point to some guides?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35522">
<div id="comment-35522" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/7ba164f40a50bc23dbb2aa825fb7bc16" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://had.co.nz/" rel="external nofollow" class="url">Hadley</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35522">November 12, 2009 at 2:18 pm</a>
</span>
</div>
<div class="comment-text"><p>Here’s my attempt – <a href="http://gist.github.com/233134" rel="nofollow">http://gist.github.com/233134</a>. A better county data source would result in more succinct code.</p>
<p>Also, what’s with your choice of colour scale? The data range from 1.2 to 30.1.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt depth-3" id="li-comment-35523">
<div id="comment-35523" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35523">November 12, 2009 at 2:35 pm</a>
</span>
</div>
<div class="comment-text"><p>thanks, i’ll check that out.</p>
<p>i based by color scale on the BLS maps:</p>
<p><a href="http://www.bls.gov/lau/maps/twmcort.gif" rel="nofollow">http://www.bls.gov/lau/maps/twmcort.gif</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even depth-3" id="li-comment-35547">
<div id="comment-35547" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/47765b8cad7d7de6314d7d573d8134d9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.thisisthegreenroom.com/" rel="external nofollow" class="url">J</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35547">November 12, 2009 at 11:11 pm</a>
</span>
</div>
<div class="comment-text"><p>I took a crack at it too, first using maps and then switching over to ggplot2, which I’m quickly learning to love…</p>
<p><a href="http://www.thisisthegreenroom.com/2009/choropleths-in-r/" rel="nofollow">http://www.thisisthegreenroom.com/2009/choropleths-in-r/</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35501">
<div id="comment-35501" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/a8dbeb170ee1c4367106457ff4f9c12f" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://elev.at/" rel="external nofollow" class="url">Joubert Nel</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35501">November 12, 2009 at 10:53 am</a>
</span>
</div>
<div class="comment-text"><p>Hi, very cool tutorial. For preparing the data, you could take a look at a web API I created: Elev.at (<a href="http://elev.at/" rel="nofollow">http://elev.at</a>). It converts an XLS or Delimited File (e.g. CSV) into XML in real-time. It can also return results in JSON/P for consumption in JavaScript.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35510">
<div id="comment-35510" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/aaa2b1f12b65d33422e8cdc48d70c0f9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://xyzzyb.com/" rel="external nofollow" class="url">Stephen</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35510">November 12, 2009 at 11:19 am</a>
</span>
</div>
<div class="comment-text"><p>Following along, we construct an unemployment dictionary using five digit numbers as keys. But the SVG file uses strings (e.g. AK_North_Slope) has keys.</p>
<p>rate = unemployment[p['id']], thus never finds a match.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35512">
<div id="comment-35512" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35512">November 12, 2009 at 11:25 am</a>
</span>
</div>
<div class="comment-text"><p>stephen, use this SVG file instead (just updated link in the post):</p>
<p><a href="http://upload.wikimedia.org/wikipedia/commons/5/5f/USA_Counties_with_FIPS_and_names.svg" rel="nofollow">http://upload.wikimedia.org/wikipedia/commons/5/5f/USA_Counties_with_FIPS_and_names.svg</a></p>
<p>sorry, i linked to the wrong SVG originally.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35513">
<div id="comment-35513" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/aaa2b1f12b65d33422e8cdc48d70c0f9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://xyzzyb.com/" rel="external nofollow" class="url">Stephen</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35513">November 12, 2009 at 11:37 am</a>
</span>
</div>
<div class="comment-text"><p>There we go! And great tutorial BTW.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35514">
<div id="comment-35514" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/247b2973bd43870fbdbce2c43fca0bdf" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Arnis</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35514">November 12, 2009 at 11:50 am</a>
</span>
</div>
<div class="comment-text"><p>Awesome!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35517">
<div id="comment-35517" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/8d73879fd29474c87e29c833d2102d9d" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.twitter.com/alexlundry" rel="external nofollow" class="url">Alex</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35517">November 12, 2009 at 12:56 pm</a>
</span>
</div>
<div class="comment-text"><p>Great tutorial. More posts like this please!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback odd alt thread-even depth-1" id="li-comment-35520">
<div id="comment-35520">
<p>Pingback:
<cite class="fn"><a href="http://gislounge.com/thematic-mapping-at-the-us-county-level-with-free-tools/" rel="external nofollow" class="url">Thematic Mapping at the US County Level with Free Tools | GIS Lounge – Geographic Information Systems</a></cite> </p>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35527">
<div id="comment-35527" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/d641bb93da41dd75b5c863217e3601f2" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">James</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35527">November 12, 2009 at 4:47 pm</a>
</span>
</div>
<div class="comment-text"><p>Ugh, Python + BeautifulSoup? How would anyone guess that that is an XML Parser? In Perl we have XML::Parser (SVG::Parser too, I wonder what the Python equivalent is called). </p>
<p>At least Kudos for using free tools until you then built a flash site with it.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35537">
<div id="comment-35537" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35537">November 12, 2009 at 8:09 pm</a>
</span>
</div>
<div class="comment-text"><p>flash? there are ways to do that for free too. that’s for another post though.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35577">
<div id="comment-35577" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/ad6aedaf124d870586eb8f6c4b66ff35" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://marlenacompton.com/" rel="external nofollow" class="url">Marlena</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35577">November 13, 2009 at 10:58 am</a>
</span>
</div>
<div class="comment-text"><p>Wondering if the flash comment is regarding the drag and zoom capability of your final map. I’d like to know how you did that. If would be a really great follow up post. This one’s definately a break-through post, and thanks very much. I’ll be emailing this one around my office.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35528">
<div id="comment-35528" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/6fe3f8decb53700455dc36ba9ec94fe9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://josh.gourneau.com/" rel="external nofollow" class="url">joshua gourneau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35528">November 12, 2009 at 5:10 pm</a>
</span>
</div>
<div class="comment-text"><p>If you want to do the same with Google Earth .KML files check out my project at:<br>
<a href="http://josh.gourneau.com/wiki/methmap" rel="nofollow">http://josh.gourneau.com/wiki/methmap</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-35531">
<div id="comment-35531">
<p>Pingback:
<cite class="fn"><a href="http://weirdcorrelations.wordpress.com/2009/11/12/google-maps-and-dutch-elections-working-demo/" rel="external nofollow" class="url">Google Maps and Dutch Elections – Working demo « Weird Correlations</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35532">
<div id="comment-35532" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/e8d94b533229d00622bbca31d3179525" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://braz.blogspot.com/" rel="external nofollow" class="url">Eoin</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35532">November 12, 2009 at 6:54 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks for the tutorial, its really cool and helps beginners like myself try Python for visualisation.</p>
<p>One question, I liked the font you used in the unemployment map for the text – can you post what it was as it seemed to really complement the image ?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35629">
<div id="comment-35629" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35629">November 14, 2009 at 12:52 am</a>
</span>
</div>
<div class="comment-text"><p>eoin, it was nothing fancy. georgia for the copy and avenir for the header.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35535">
<div id="comment-35535" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/d641bb93da41dd75b5c863217e3601f2" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">James</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35535">November 12, 2009 at 7:14 pm</a>
</span>
</div>
<div class="comment-text"><p>This is a much less dramatic map if you spread the map colors evenly between the range of values.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35538">
<div id="comment-35538">
<p>Pingback:
<cite class="fn"><a href="http://www.chrisfarris.com/2009/11/how-to-make-a-us-county-thematic-map/" rel="external nofollow" class="url">How to Make a US County Thematic Map « Chris Farris</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35543">
<div id="comment-35543" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/d070bd189c7f3cf7155f0e5ff4384205" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.antoinebonnin.com/" rel="external nofollow" class="url">Antoine</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35543">November 12, 2009 at 10:03 pm</a>
</span>
</div>
<div class="comment-text"><p>Awesome post!<br>
If you decide to do another tutorial, could it be using Processing :)? </p>
<p>Thanks for the great blog.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35706">
<div id="comment-35706" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/8eb29630732aecd29eb0d4de23023e12" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.tom-carden.co.uk/" rel="external nofollow" class="url">Tom Carden</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35706">November 16, 2009 at 2:32 am</a>
</span>
</div>
<div class="comment-text"><p>Here’s a version of Nathan’s map in Processing: <a href="http://www.tom-carden.co.uk/misc/unemployment/processing.html" rel="nofollow">http://www.tom-carden.co.uk/misc/unemployment/processing.html</a></p>
<p>See the sourcecode and <a href="http://www.tom-carden.co.uk/misc/unemployment/" rel="nofollow">http://www.tom-carden.co.uk/misc/unemployment/</a> for details of a couple of changes from the files posted here.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-36044">
<div id="comment-36044" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/d070bd189c7f3cf7155f0e5ff4384205" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.antoinebonnin.com/" rel="external nofollow" class="url">Antoine</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-36044">November 25, 2009 at 8:45 pm</a>
</span>
</div>
<div class="comment-text"><p>@Tom: That’s awesome. Only starting to learn Processing now, this gives me hopes :)</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35544">
<div id="comment-35544">
<p>Pingback:
<cite class="fn"><a href="http://www.thisisthegreenroom.com/2009/choropleths-in-r/" rel="external nofollow" class="url">Choropleths in R at This is the Green Room</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35548">
<div id="comment-35548" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/5a7d24ff33b19c7bf79ae6fc38cbdf93" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Joe</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35548">November 12, 2009 at 11:15 pm</a>
</span>
</div>
<div class="comment-text"><p>For web-only use, wouldn’t it be simpler to create a separate CSS file adding the coloring styles to the SVG? You could probably do the processing in Excel, frankly, and export a text file from there, rather than writing a custom script to change every path in the original SVG file. </p>
<p>It wouldn’t be the most elegant CSS, but what I have in mind is<br>
#02220 {fill:medium}<br>
#02260 {fill:darker}<br>
…</p>
<p>Basically calculate the fill color, match it up with a FIPS id, and use CSS to style the path by referring to its id.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35551">
<div id="comment-35551">
<p>Pingback:
<cite class="fn"><a href="http://dougpete.wordpress.com/2009/11/13/links-for-2009-11-12/" rel="external nofollow" class="url">links for 2009-11-12 « doug – off the record</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-odd thread-alt depth-1" id="li-comment-35555">
<div id="comment-35555">
<p>Pingback:
<cite class="fn"><a href="http://greatsufficiency.net/blog/?p=59" rel="external nofollow" class="url">michelle m. hudson / blog » Blog Archive » Daily Digest for November 13th</a></cite> </p>
</div>
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35556">
<div id="comment-35556">
<p>Pingback:
<cite class="fn"><a href="http://www.duetsch.info/destillat-kw46-2009.html" rel="external nofollow" class="url">Destillat KW46-2009 | duetsch.info - GNU/Linux, Open Source, Softwareentwicklung, Selbstmanagement, Vim ...</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-odd thread-alt depth-1" id="li-comment-35568">
<div id="comment-35568">
<p>Pingback:
<cite class="fn"><a href="http://dandube.com/blog/?p=437" rel="external nofollow" class="url">Daily Digest for November 13th</a></cite> </p>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35587">
<div id="comment-35587" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/03bbc19baf331b16f886af35321e8273" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">homunculus</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35587">November 13, 2009 at 2:12 pm</a>
</span>
</div>
<div class="comment-text"><p>As someone who’s never used Python, I found this intriguing yet ultimately confusingâ€”especially Step 4, which assumes readers will know how to start writing a script etc. You don’t have to include a Python tutorial, but a little more explanation of how you get from Step 3 to 4 would be nice. I spent over an hour trying to get the script up and running. Is this how-to for pros only?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35588">
<div id="comment-35588" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/aaa2b1f12b65d33422e8cdc48d70c0f9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://xyzzyb.com/" rel="external nofollow" class="url">Stephen</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35588">November 13, 2009 at 2:42 pm</a>
</span>
</div>
<div class="comment-text"><p>Step 4 is really just creating a new blank file. From there just sequentially add in the text from each step to that file. At the end of the process your file should be very similar (or identical) to the sample of the complete script at the end of the article.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35592">
<div id="comment-35592" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/03bbc19baf331b16f886af35321e8273" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">homunculus</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35592">November 13, 2009 at 4:33 pm</a>
</span>
</div>
<div class="comment-text"><p>I did that and kept getting error messages when I ran the script.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35591">
<div id="comment-35591" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/50424f72b3263bbc52f37a1d4e1593ac" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">David Smith</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35591">November 13, 2009 at 3:36 pm</a>
</span>
</div>
<div class="comment-text"><p>It the goal is to make thematic maps with free tools, it’s surprising R wasn’t mentioned. Several examples of creating the same chart in R (using shape files instead of SVG maps) are here:</p>
<p><a href="http://blog.revolution-computing.com/2009/11/choropleth-challenge-result.html" rel="nofollow">http://blog.revolution-computing.com/2009/11/choropleth-challenge-result.html</a></p>
<p>As a bonus, R provides an environment for not just plotting but also analyzing the unemployment data.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35597">
<div id="comment-35597" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/546390c21dceb3b21f974bfda7a0fc5d" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://blog.braintapper.com/" rel="external nofollow" class="url">Steven Ng</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35597">November 13, 2009 at 5:59 pm</a>
</span>
</div>
<div class="comment-text"><p>Great tutorial, Nathan! </p>
<p>For those of you using BI tools like Pentaho, I’ve created a proof of concept of the solution above using Pentaho data integration, which is also free. Pentaho is a little less intimidating than scripting in Python, since it has a Visio-style GUI. My solution required a bit of XML knowledge, but the actual formulas I used in the solution were quite rudimentary.</p>
<p><a href="http://blog.braintapper.com/2009/11/using-pentaho-data-integration-to-make.html" rel="nofollow">http://blog.braintapper.com/2009/11/using-pentaho-data-integration-to-make.html</a></p>
<p>You could easily tweak the Pentaho solution to load the data from Excel, a database or any other type of data source.</p>
<p>(Yeah, I know my CSS is a little ugly, I’m working on it!)</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35633">
<div id="comment-35633" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/7d7e539e896eb43ab6aa434e6b2c8c62" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Paul Skolnick</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35633">November 14, 2009 at 2:58 am</a>
</span>
</div>
<div class="comment-text"><p>Fascinating tutorial, Nathan… but after spending about 8 hours, I find some gaps. Of course, I find gaps… because I’m Python (and most other code-illiterate). Sticking point for me seems to be figuring out WHERE and HOW to install BeautifulSoup in a place where Python will see it.</p>
<p>Can you explain that step?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35645">
<div id="comment-35645" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35645">November 14, 2009 at 10:02 am</a>
</span>
</div>
<div class="comment-text"><p>Paul, start Python, import sys, and look at sys.path, which gives you a list of folders, with complete paths. One (or more) of these folders are called “site-packages”. Copy BeautifulSoup.py to there.</p>
<p>On my machine, it’s “/Library/Python/2.5/site-packages”.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35647">
<div id="comment-35647" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/7d7e539e896eb43ab6aa434e6b2c8c62" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Paul Skolnick</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35647">November 14, 2009 at 1:32 pm</a>
</span>
</div>
<div class="comment-text"><p>New to code and confused still. How do I “look” at sys.path? Is that $echo or list or what?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment even depth-2" id="li-comment-35654">
<div id="comment-35654" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/wordpress/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35654">November 14, 2009 at 4:53 pm</a>
</span>
</div>
<div class="comment-text"><p>You need to start an interactive Python session, and how you do it depends on your platform. When you get the &gt;&gt;&gt; prompt, type “import sys” and enter, then type “sys.path” to see the list of folders.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35653">
<div id="comment-35653" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/wordpress/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35653">November 14, 2009 at 4:49 pm</a>
</span>
</div>
<div class="comment-text"><p>Here’s my map: </p>
<p><a href="http://amosnewcombe.info/wordpress/wp-content/uploads/2009/11/CountyUnemployment.mov" rel="nofollow">http://amosnewcombe.info/wordpress/wp-content/uploads/2009/11/CountyUnemployment.mov</a></p>
<p>It’s a movie of twenty years of data 1990-2009. Rather than group counties together and color each group exactly the same, I used the same color (dark red #800000), but made the opacity proportional to the rate. (Specifically fill-opacity = min(rate*5, 1). A 20% rate is fully opaque, % is transparent. ackground is white) And I thought it looked best with zero-width boundaries.</p>
<p>20 frames; 0.5 sec/frame.</p>
<p>The biggest PITA was saving each of the 20 SVG files in Illustrator, to PNG so GraphicConverter could use them.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35662">
<div id="comment-35662" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/98b3d1e129096c5452c7614f9ab9c162" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Nate</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35662">November 14, 2009 at 10:35 pm</a>
</span>
</div>
<div class="comment-text"><p>Any suggestions for how to do this based on congressional districts rather than counties? I have CD data that this would work great for.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35663">
<div id="comment-35663" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/47765b8cad7d7de6314d7d573d8134d9" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.thisisthegreenroom.com/" rel="external nofollow" class="url">J</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35663">November 14, 2009 at 11:17 pm</a>
</span>
</div>
<div class="comment-text"><p>The government supplies lat/long coordinates for congressional districts here: <a href="http://www.census.gov/geo/www/cob/bdy_files.html" rel="nofollow">http://www.census.gov/geo/www/cob/bdy_files.html</a></p>
<p>That data should be compatible with an R-based methods using ggplot, similar to what Hadley and I have detailed above. You’d have to do a little work to line up your data with the coordinate data, but it shouldn’t be too bad.</p>
<p>Unfortunately I’m traveling until tomorrow and can’t really take a look at the data myself right now. Pls let me know if this gives you some direction, happy to help further if I can.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35672">
<div id="comment-35672">
<p>Pingback:
<cite class="fn"><a href="http://blog.ennuyer.net/?p=2428" rel="external nofollow" class="url">Ennuyer.net » Blog Archive » Rails Reading - November 15, 2009</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35693">
<div id="comment-35693" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/4a0d5d4288d4532571aa0e9274c99769" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Russell</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35693">November 15, 2009 at 11:58 pm</a>
</span>
</div>
<div class="comment-text"><p>I’m having a strange problem that I hope somebody can help me with. The script runs OK, but in addition to modifying the path tags as expected, it’s also changing the and tags by pulling out the closing delimiters in those tags, and then adding new closing tags at the very end of the file. The resulting svg file doesn’t render unless I go in and manually correct it.</p>
<p>I’m running Vista, Python 2.6.4, and Beautiful Soup 3.0.7a. Any help would be greatly appreciated. Even with the problems this is an absolutely amazing tool!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-35694">
<div id="comment-35694" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/4a0d5d4288d4532571aa0e9274c99769" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Russell</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35694">November 16, 2009 at 12:00 am</a>
</span>
</div>
<div class="comment-text"><p>I’m having a strange problem that I hope somebody can help me with. The script runs OK, but in addition to modifying the path tags as expected, it’s also changing the sodipodi:namedview … / and defs id=”defs9561″ / tags by pulling out the closing delimiters in those tags, and then adding new closing tags at the very end of the file. The resulting svg file doesn’t render unless I go in and manually correct it.</p>
<p>I’m running Vista, Python 2.6.4, and Beautiful Soup 3.0.7a. Any help would be greatly appreciated. Even with the problems this is an absolutely amazing tool!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35696">
<div id="comment-35696" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/edc882f85ef2aea4c3ad38ce621d5bde" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mollie</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35696">November 16, 2009 at 12:20 am</a>
</span>
</div>
<div class="comment-text"><p>I’m stuck on this too.</p>
<p>I installed BeautifulSoup as in the comments above.</p>
<p>I used the script above except I added<br>
import csv<br>
from BeautifulSoup import BeautifulSoup<br>
(at the beginning)<br>
and made the line that copied over as three lines one line again.</p>
<p>Now when I try “python colorize_svg.py &gt; unemployment2009.svg”, it makes the svg file, but it the image part is blank (but the right size). The svg file has plenty of code in it, but it appears to not display anything. The fill colors have been changed as expected, and I don’t see any errors, but something isn’t working.</p>
<p>Any ideas?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35697">
<div id="comment-35697" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/edc882f85ef2aea4c3ad38ce621d5bde" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mollie</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35697">November 16, 2009 at 12:23 am</a>
</span>
</div>
<div class="comment-text"><p>Now that I see Russel’s post, it looks like I’m having the same problem. I’m running Mac OS 10.6, Python 2.6.1, and BeautifulSoup 3.0.7a</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35720">
<div id="comment-35720" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/4a0d5d4288d4532571aa0e9274c99769" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Russell</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35720">November 16, 2009 at 12:26 pm</a>
</span>
</div>
<div class="comment-text"><p>I may be a bit slow, but I think I’ve figured this out. Beautiful Soup is doing a lot more than just parsing the svg file. The prettify command tells it to fix anything it thinks is wrong with the file, and it doesn’t seem to like the embedded closing tags in the sodipodi:namedview and defs id tags, so it strips them out and adds explicit closing tags at the end of the file, which breaks it.</p>
<p>The easy solution is to edit the original svg file to add explicit closing tags where they should have been in the first place. This keeps Beautiful Soup happy and works fine. I’ll post a link to my corrected version in a bit.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even depth-3" id="li-comment-35733">
<div id="comment-35733" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/edc882f85ef2aea4c3ad38ce621d5bde" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mollie</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35733">November 16, 2009 at 5:07 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks, Russell, that works great (and sorry I spelled your name wrong earlier) :)</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt depth-3" id="li-comment-35746">
<div id="comment-35746" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/4a0d5d4288d4532571aa0e9274c99769" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Russell</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35746">November 16, 2009 at 9:24 pm</a>
</span>
</div>
<div class="comment-text"><p>Here’s a link to my modified counties.svg file. It should fix the problem if your svg output file doesn’t render but everything else seems to be OK:</p>
<p><a href="http://www.box.net/shared/tqnqiedfoi" rel="nofollow">http://www.box.net/shared/tqnqiedfoi</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even depth-3" id="li-comment-35749">
<div id="comment-35749" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/3f24fbb0e5cae70819acc09fcefe0ae4" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Jason L</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35749">November 16, 2009 at 10:33 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks Russell, that .svg file of yours just helped me finally solve the puzzle and get the whole thing to work :)</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment odd alt depth-2" id="li-comment-35728">
<div id="comment-35728" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/wordpress/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35728">November 16, 2009 at 3:51 pm</a>
</span>
</div>
<div class="comment-text"><p>I ran into this too, and solved it by running the output of BeautifulSoup.prettify() through the following function:</p>
<p>import re</p>
<p>reSodipodi = re.compile(r”)<br>
reDefs = re.compile(r”)</p>
<p>def CleanSoup(s):<br>
‘Remove the problematic tags written by BeautifulSoup.’<br>
s = reSodipodi.sub(”, s)<br>
s = reDefs.sub(”, s)<br>
return s</p>
<p>This trashes both the beginning and the end tags, which are unneeded to display the SVG.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="pingback even thread-even depth-1" id="li-comment-35698">
<div id="comment-35698">
<p>Pingback:
<cite class="fn"><a href="http://everythingrightiswrongagain.com/blog/?p=580" rel="external nofollow" class="url">Choropleth maps — head’s up, Google « Everything Right Is Wrong Again</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-35700">
<div id="comment-35700" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/8eb29630732aecd29eb0d4de23023e12" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.tom-carden.co.uk/" rel="external nofollow" class="url">Tom Carden</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35700">November 16, 2009 at 12:50 am</a>
</span>
</div>
<div class="comment-text"><p>Nice tutorial Nathan!</p>
<p>(Lots of calls for R solutions I see, though none of the Revolutions challengers included Alaska or Hawaii in their solution.)</p>
<p>I’m personally interested in (a) keeping things dynamic and (b) making things web-native.</p>
<p>With that in mind, I ported some of your code over to javascript, hacked the CSV into JSON/P-ish form and used SVGWeb to render the county shapes: <a href="http://www.tom-carden.co.uk/misc/unemployment/" rel="nofollow">http://www.tom-carden.co.uk/misc/unemployment/</a></p>
<p>I haven’t used SVG in a long time so this was a nice refresher. SVGWeb works well: it doesn’t mess with Safari or Firefox but I tested this in IE8 too and got comparable results* as promised. </p>
<p>*The only tweak I made was to set stroke-opacity to 0.1 instead of stroke-weight, because the flash renderer used by SVGWeb didn’t like fractional line weight.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35703">
<div id="comment-35703" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/8eb29630732aecd29eb0d4de23023e12" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.tom-carden.co.uk/" rel="external nofollow" class="url">Tom Carden</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35703">November 16, 2009 at 2:06 am</a>
</span>
</div>
<div class="comment-text"><p>PS I noticed two errors in the SVG file from Wikipedia. I’m trying to figure out how to correct it there, in the meantime here’s the one I’m using if you want to avoid the blank (grey) counties: <a href="http://www.tom-carden.co.uk/misc/unemployment/USA_Counties_with_FIPS_and_names.svg" rel="nofollow">http://www.tom-carden.co.uk/misc/unemployment/USA_Counties_with_FIPS_and_names.svg</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35716">
<div id="comment-35716" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/546390c21dceb3b21f974bfda7a0fc5d" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://blog.braintapper.com/" rel="external nofollow" class="url">Steven Ng</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35716">November 16, 2009 at 10:57 am</a>
</span>
</div>
<div class="comment-text"><p>Hey Tom, when I was running through the exercise to render the map using Pentaho’s tools I found that the Inkscape generated XML is a little less than standards compliant. </p>
<p>You might want to open up the SVG in Inkscape and save it as a “Plain SVG” which will strip out a lot of junk attributes.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment even depth-2" id="li-comment-35717">
<div id="comment-35717" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/2c4874805030568a3b6714cd79d46c73" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://flowingdata.com/about-nathan" rel="external nofollow" class="url">Nathan Yau</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35717">November 16, 2009 at 11:33 am</a>
</span>
</div>
<div class="comment-text"><p>oh wow, that’s awesome. thanks, tom</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35726">
<div id="comment-35726" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/cde3ec653db1d67ff30e0252fab9ac6f" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Douglas Moore</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35726">November 16, 2009 at 2:44 pm</a>
</span>
</div>
<div class="comment-text"><p>I kept getting errors until someone pointed out that these commands have to be the colorize_py.svg script. </p>
<p>import csv<br>
from BeautifulSoup import BeautifulSoup</p>
<p>They’re missing from the “complete Python script” referenced at the end.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35729">
<div id="comment-35729" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/3f24fbb0e5cae70819acc09fcefe0ae4" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Jason L</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35729">November 16, 2009 at 3:52 pm</a>
</span>
</div>
<div class="comment-text"><p>Very basic question here – how do I run the script (step 14) in Windows? </p>
<p>My file path is C:\Users\Owner\Desktop\thematicmaps\colorize_svg.py</p>
<p>I was reading about making python scripts ‘double-clickable’ and it was a bit over my head, but when I double-click to open it, it opens python quickly and then closes. I was told to use CMD but I’m a newbie and don’t know what to type to run the script with the proper output. Also – I’m using Python 2.6.4 Windows installer (Windows binary — does not include source) and I put Beautiful Soup in the Site Packages folder correctly as well.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-35736">
<div id="comment-35736" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/62db4a12132bb0652fe00bd4b165b498" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://vatul.net/" rel="external nofollow" class="url">Maitri</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35736">November 16, 2009 at 6:05 pm</a>
</span>
</div>
<div class="comment-text"><p>Start –&gt; Run –&gt; Type in ‘cmd’<br>
cd over to the directory you mention above<br>
colorize_svg.py &gt; unemployment2009.svg<br>
A new file called “unemployment2009.svg” will appear in the same directory.<br>
Drag the file to your browser. Et voila!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-3" id="li-comment-35740">
<div id="comment-35740" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/3f24fbb0e5cae70819acc09fcefe0ae4" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Jason L</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35740">November 16, 2009 at 7:01 pm</a>
</span>
</div>
<div class="comment-text"><p>Thank you! I did get an error though – </p>
<p>“C:\Users\Owner\Desktop\thematicmaps\colorize_svg.py”, line 31<br>
path_style = ‘font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1;<br>
^</p>
<p>SyntaxError: EOL while scanning string literal</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt depth-3" id="li-comment-35747">
<div id="comment-35747" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/edc882f85ef2aea4c3ad38ce621d5bde" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mollie</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35747">November 16, 2009 at 9:29 pm</a>
</span>
</div>
<div class="comment-text"><p>When you copy that line over, it turns into three lines</p>
<p>path_style = ‘font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1;<br>
stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;<br>
marker-start:none;stroke-linejoin:bevel;fill:’</p>
<p>but should really be one :)</p>
<p>path_style = ‘font-size:12px;fill-rule:nonzero;stroke:#FFFFFF;stroke-opacity:1;stroke-width:0.1;stroke-miterlimit:4;stroke-dasharray:none;stroke-linecap:butt;marker-start:none;stroke-linejoin:bevel;fill:’</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even depth-3" id="li-comment-35750">
<div id="comment-35750" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/3f24fbb0e5cae70819acc09fcefe0ae4" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Jason L</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35750">November 16, 2009 at 10:36 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks Mollie that did the trick, I appreciate you taking the time to look at that!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35735">
<div id="comment-35735" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/62db4a12132bb0652fe00bd4b165b498" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://vatul.net/" rel="external nofollow" class="url">Maitri</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35735">November 16, 2009 at 6:02 pm</a>
</span>
</div>
<div class="comment-text"><p>Nathan, awesome script! But, help! Got all the way through the end, ran it in Firefox and this is what I got:</p>
<p>XML Parsing Error:<br>
Location: file:///C:/unemployment2009.svg<br>
Line Number 18, Column 101: </p>
<p>I don’t have a skins-1.5 directory, but somehow the code refers to one? What’s up?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment even depth-2" id="li-comment-35737">
<div id="comment-35737" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/62db4a12132bb0652fe00bd4b165b498" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://vatul.net/" rel="external nofollow" class="url">Maitri</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35737">November 16, 2009 at 6:06 pm</a>
</span>
</div>
<div class="comment-text"><p>Hmm, comment fail. Anyway, line 18 in that file refers to this href:<br>
href=”/skins-1.5/common/shared.css?243z2″</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-3" id="li-comment-35738">
<div id="comment-35738" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/62db4a12132bb0652fe00bd4b165b498" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://vatul.net/" rel="external nofollow" class="url">Maitri</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35738">November 16, 2009 at 6:15 pm</a>
</span>
</div>
<div class="comment-text"><p>Nevermind – I used <a href="http://www.tom-carden.co.uk/misc/unemployment/USA_Counties_with_FIPS_and_names.svg" rel="nofollow">http://www.tom-carden.co.uk/misc/unemployment/USA_Counties_with_FIPS_and_names.svg</a> that Tom provided above as the base and everything works now.</p>
<p>Thanks!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
</ul> 
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-35748">
<div id="comment-35748" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/edc882f85ef2aea4c3ad38ce621d5bde" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.mollietaylor.com/" rel="external nofollow" class="url">Mollie</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35748">November 16, 2009 at 9:37 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks for the great tutorial! I’m sure I’ll make good use of it. When I have some free time on my hands I’m going to try to figure out how to do something similar with world maps. It should be pretty straight forward now that I understand this tutorial.</p>
<p>Also, the comments on this post are very helpful, both in pointing out other ways to make similar maps and in clarifying how to make this one this way.</p>
<p>No more filling in maps one region at a time in Photoshop. Hooray!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-35761">
<div id="comment-35761" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/aff0c98f7bca17adf2a3c22ca362a73b" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://brian.shaler.name/" rel="external nofollow" class="url">Brian</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-35761">November 17, 2009 at 4:10 am</a>
</span>
</div>
<div class="comment-text"><p>Wow! This looks awesome. I’m going to have to come back later when I have some time to walk through it. Thanks for posting this!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-35775">
<div id="comment-35775">
<p>Pingback:
<cite class="fn"><a href="http://vatul.net/blog/index.php/3484/" rel="external nofollow" class="url">VatulBlog: Making US Unemployment Maps</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-even depth-1" id="li-comment-35829">
<div id="comment-35829">
<p>Pingback:
<cite class="fn"><a href="http://www.marcoscan.com/2009/11/esempio-di-infomappa-con-r.html" rel="external nofollow" class="url">Esempio di infomappa con R…</a></cite> </p>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-35872">
<div id="comment-35872">
<p>Pingback:
<cite class="fn"><a href="http://kelsocartography.com/blog/?p=3135" rel="external nofollow" class="url">How to Make a US County Thematic Map Using Free Tools (FlowingData) « Kelso’s Corner</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-even depth-1" id="li-comment-35914">
<div id="comment-35914">
<p>Pingback:
<cite class="fn"><a href="http://dcbigmike.wordpress.com/2009/11/21/make-your-own-choropleth-map/" rel="external nofollow" class="url">Make your own choropleth map « big mike in DC — Ð±Ð¾Ð»ÑŒÑˆÐ¾Ð¹ ÐœÐ¸ÑˆÐ°</a></cite> </p>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-35970">
<div id="comment-35970">
<p>Pingback:
<cite class="fn"><a href="http://www.newsprint-fray.com/2009/11/23/data-visualizations-and-the-tragically-hip-part-0/" rel="external nofollow" class="url">data visualizations and the tragically hip, part 0&nbsp;|&nbsp;newsprint fray</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-even depth-1" id="li-comment-35983">
<div id="comment-35983">
<p>Pingback:
<cite class="fn"><a href="http://www.programmish.com/?p=94" rel="external nofollow" class="url">US School Density SVG « Programmish</a></cite> </p>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-36006">
<div id="comment-36006">
<p>Pingback:
<cite class="fn"><a href="http://antonfromperm.wordpress.com/2009/11/25/how-to-make-a-russian-regional-thematic-map/" rel="external nofollow" class="url">How to make a Russian regional thematic map « Anton From Perm</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-36054">
<div id="comment-36054" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/f6346e031bc1e2f69d6f688066708e8c" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.geotests.net/blog" rel="external nofollow" class="url">Laurent JÃ©gou</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-36054">November 26, 2009 at 4:41 am</a>
</span>
</div>
<div class="comment-text"><p>Thanks for this useful tutorial. I tested interactive mapping with SVG a while ago for a paper, and produced some classification algorithms (and proportional symbols sizing too) in JS which could be interesting.</p>
<p>The paper : <a href="http://mappemonde.mgm.fr/num2/articles/art04201.en.html" rel="nofollow">http://mappemonde.mgm.fr/num2/articles/art04201.en.html</a></p>
<p>The new SVG version : <a href="http://www.geotests.net/test/russie/" rel="nofollow">http://www.geotests.net/test/russie/</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-36059">
<div id="comment-36059">
<p>Pingback:
<cite class="fn"><a href="http://www.answermysearches.com/mini-searches-with-answers-85/746/" rel="external nofollow" class="url">Answer My Searches » Blog Archive » Mini Searches with Answers</a></cite> </p>
</div>
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-36281">
<div id="comment-36281" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/522ae1a4882268ecfb47f7fd3f8dfcf3" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mary Jane Rutkowski</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-36281">December 1, 2009 at 2:56 pm</a>
</span>
</div>
<div class="comment-text"><p>Thanks for a very interesting tutorial — Weird problem:<br>
import csv<br>
from library/frameworks/Python.framework/Versions/3.1/lib/python3.1/site-packages/BeautifulSoup-3.1.01/BeautifulSoup import BeautifulSoup<br>
Returns a syntax error. Any ideas? Thanks ever so much!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-36316">
<div id="comment-36316" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/522ae1a4882268ecfb47f7fd3f8dfcf3" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Mary Jane Rutkowski</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-36316">December 2, 2009 at 9:56 am</a>
</span>
</div>
<div class="comment-text"><p>Hi<br>
When I run the program, I get the following, which is Greek to me :-)<br>
Traceback (most recent call last):<br>
File “/Users/MaryJane/Desktop/PythonFiles/colorize_svg.py”, line 4, in<br>
from BeautifulSoup import BeautifulSoup<br>
File “/Library/Frameworks/Python.framework/Versions/3.1/lib/python3.1/BeautifulSoup.py”, line 427<br>
raise AttributeError, “‘%s’ object has no attribute ‘%s’” % (self.__class__.__name__, attr)<br>
^<br>
SyntaxError: invalid syntax</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-even depth-1" id="li-comment-36318">
<div id="comment-36318" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/wordpress/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-36318">December 2, 2009 at 10:21 am</a>
</span>
</div>
<div class="comment-text"><p>Python 3 is a significant departure from Python 2.x, and many third-party libraries, evidently including BeautifulSoup, are broken and need to be rewritten by their developer. You’re better off using Python 2.6 for this.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-36383">
<div id="comment-36383">
<p>Pingback:
<cite class="fn"><a href="http://www.usa-greencards.de/?p=429" rel="external nofollow" class="url">Infomaps using R – Visualizing German unemployment rates by district on a map « R you ready? temporary R-Test-Blog</a></cite> </p>
</div>
</li> 
<li class="pingback odd alt thread-even depth-1" id="li-comment-37035">
<div id="comment-37035">
<p>Pingback:
<cite class="fn"><a href="http://www.petercollingridge.co.uk/?p=471" rel="external nofollow" class="url">Choropleth maps of Africa - My Microcosm</a></cite> </p>
</div>
</li> 
<li class="comment even thread-odd thread-alt depth-1" id="li-comment-37173">
<div id="comment-37173" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/3fe5619675298d48a04ad542060e75c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://www.danielsato.com/" rel="external nofollow" class="url">Daniel Sato</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37173">December 11, 2009 at 8:54 pm</a>
</span>
</div>
<div class="comment-text"><p>Not knowing anything about python, I copied and pasted the code in step 13, following ### colorize_svg.py into a new document that I titled colorize_svg.py. I also removed any line breaks in the county style section, which seemed to give me problems initially.</p>
<p>When I run the script, it does generate a file titled unemployment2009.svg, but all I see is a blank white document. When I open the document in a text editor, there is definitely information in it, though I cannot yet decipher it (being the layman that I am).</p>
<p>I am running python 2.5.1 and have beautiful soup 3.0.8 in the same folder as all of my unemployment/colorize files.</p>
<p>Any ideas?</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-37184">
<div id="comment-37184" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/864645ee849ac09a641b262c5924b5c8" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://amosnewcombe.info/wordpress/" rel="external nofollow" class="url">Amos Newcombe</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37184">December 12, 2009 at 6:43 am</a>
</span>
</div>
<div class="comment-text"><p>A couple of tags in the SVG file get mangled by BeautifulSoup. See earlier comments for solutions.</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="comment even thread-even depth-1" id="li-comment-37179">
<div id="comment-37179" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/a0cdaf4ab27f7aaee87f806b45489749" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Garrett</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37179">December 11, 2009 at 11:51 pm</a>
</span>
</div>
<div class="comment-text"><p>I just used this method to create a map for a project I’m working on. Thanks for the tutorial!</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment odd alt thread-odd thread-alt depth-1" id="li-comment-37283">
<div id="comment-37283" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/823d01ae6a165dd1104a1de7fa23f6b1" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">T Ricketts</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37283">December 16, 2009 at 6:13 am</a>
</span>
</div>
<div class="comment-text"><p>FIPS is now INCITS,<br>
see <a href="http://www.census.gov/geo/www/ansi/ansi.html" rel="nofollow">http://www.census.gov/geo/www/ansi/ansi.html</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
<li class="comment even thread-even depth-1" id="li-comment-37411">
<div id="comment-37411" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/c18d33c1811016c088392171c7a94fa1" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn"><a href="http://openprocessing.org/visuals/?visualID=6636" rel="external nofollow" class="url">Anthony Smee</a></cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37411">December 20, 2009 at 10:26 am</a>
</span>
</div>
<div class="comment-text"><p>Hi Nathan</p>
<p>Excellent tutorial. I am a little behind the curve, but I have taken your tutorial and converted into a Processing App for the time series 2005 to September 2009.</p>
<p>You might have to increase your Java Heap Space to run it, there is a lot of data to load! Thanks again, I can’t wait to work through the next one!</p>
<p>Regards</p>
<p>Anthony</p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
<ul class="children">
<li class="comment odd alt depth-2" id="li-comment-37431">
<div id="comment-37431" class="">
<div class="avatar">
<img alt="" src="./How to Make a US County Thematic Map Using Free Tools_files/c18d33c1811016c088392171c7a94fa1" class="avatar avatar-50 photo" height="50" width="50"> </div> 
<div class="comment-content">
<div class="comment-author vcard">
<cite class="fn">Anthony</cite> <span class="comment-meta">— <a href="http://flowingdata.com/2009/11/12/how-to-make-a-us-county-thematic-map-using-free-tools/#comment-37431">December 21, 2009 at 6:44 am</a>
</span>
</div>
<div class="comment-text"><p>The link might help: <a href="http://openprocessing.org/visuals/?visualID=6636" rel="nofollow">http://openprocessing.org/visuals/?visualID=6636</a></p>
</div>
<div class="reply">
</div>
</div> 
<div class="clear-line"></div>
</div>
</li> 
</ul> 
</li> 
<li class="pingback even thread-odd thread-alt depth-1" id="li-comment-38013">
<div id="comment-38013">
<p>Pingback:
<cite class="fn"><a href="http://pixelbits.wordpress.com/2010/01/10/how-to-make-a-us-county-thematic-map-using-free-tools/" rel="external nofollow" class="url">How to Make a US County Thematic Map Using Free Tools « PixelBits</a></cite> </p>
</div>
</li> 
</ul>
</div> 
</div>
</div>
</div> 
</div> 
</div> 
<div id="footer">
<div id="footer-container" class="content">
<div class="float-left" style="width:32%;margin-right:5%;">
<div id="about" class="sec">
<h3>About</h3>
<p>FlowingData explores how designers, statisticians, and computer scientists are using data to understand ourselves better — mainly through data visualization.</p>
<p>As for me, I'm Nathan Yau, and I have a PhD in statistics, with a background in eating.</p>
<p><a href="http://flowingdata.com/about/">More...</a></p>
</div>
</div>
<div class="float-left" style="width:36%;margin-right:5%;">
<div id="book-single" class="sec">
<h3>Books</h3>
<ul id="books" style="margin-bottom:0">
<li>
<a href="http://flowingdata.com/data-points/"><img src="./How to Make a US County Thematic Map Using Free Tools_files/DataPoints60x75.png" title="Data Points" class="img-left" style="margin-bottom:0"><strong>Data Points</strong><br>Visualization that Means Something</a><br>
<div class="clear-line"></div>
</li>
<li><a href="http://flowingdata.com/visualize-this/"><img src="./How to Make a US County Thematic Map Using Free Tools_files/flowingdata60x79.jpg" title="Visualize This" class="img-left" style="margin-bottom:0"><strong>Visualize This</strong><br>The FlowingData Guide to Design, Visualization, and Statistics</a><br>
<div class="clear-line"></div>
</li>
</ul>
</div> 
</div>
<div class="float-left" style="width:22%">
<div id="follow" class="sec">
<h3>Follow</h3>
<p>
<a href="http://twitter.com/flowingdata">Twitter</a> &nbsp;•&nbsp;
<a href="http://facebook.com/flowingdata">Facebook</a> &nbsp;•&nbsp;
<a href="http://eepurl.com/icL0o">Email</a> &nbsp;•&nbsp;
<a href="http://flowingdata.com/feed">RSS</a>
</p>
</div>
<div id="misc" class="sec">
<h3>Miscellaneous</h3>
<a href="http://flowingdata.com/contact">Contact</a> &nbsp;•&nbsp;
<a href="http://flowingdata.com/advertise">Sponsorship</a> &nbsp;•&nbsp;
<a href="http://flowingdata.bigcartel.com/">Shop</a><a>
</a></div><a>
</a></div><a>
<div class="clear-line"></div>
</a></div><a> 
</a></div><a> 
</a><div id="bottom"><a>
Unless otherwise noted, graphics and words by me are licensed under </a><a href="http://creativecommons.org/licenses/by-nc/3.0/us/">Creative Commons BY-NC</a>. Contact original authors for everything else.
</div>
 
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script><script src="./How to Make a US County Thematic Map Using Free Tools_files/ga.js" type="text/javascript"></script>
<script type="text/javascript">
var pageTracker = _gat._getTracker("UA-865100-4");
pageTracker._initData();
pageTracker._trackPageview();
</script>
<script type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/shCore.js"></script>
<script type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/shBrushPython.js"></script>
<script type="text/javascript">
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeDefault.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://flowingdata.com/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['auto-links'] = false;
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = false;
	SyntaxHighlighter.all();
</script>
<script type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/comment-reply.min.js"></script>
<script type="text/javascript" src="./How to Make a US County Thematic Map Using Free Tools_files/devicepx-jetpack.js"></script>
<script src="./How to Make a US County Thematic Map Using Free Tools_files/e-201423.js" type="text/javascript"></script>
<script type="text/javascript">
	st_go({v:'ext',j:'1:3.0.1',blog:'1938889',post:'3581',tz:'-7'});
	var load_cmc = function(){linktracker_init(1938889,3581,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script><img id="wpstats" src="./How to Make a US County Thematic Map Using Free Tools_files/g.gif" alt="">

 
 
 
 </body></html>